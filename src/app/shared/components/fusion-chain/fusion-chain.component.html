<!-- Demon and Level -->
<form class="demon-form">
	<mat-form-field class="demon-form-field" appearance="fill">
		<mat-label>Demon</mat-label>
		<input
			type="text"
			placeholder="Mara"
			aria-label="Demon Name"
			matInput
			[formControl]="demonControl"
			[matAutocomplete]="auto"
		/>
		<mat-autocomplete #auto="matAutocomplete">
			<mat-option
				*ngFor="let demon of filteredDemons | async"
				[value]="demon"
			>
				{{ demon }}
			</mat-option>
		</mat-autocomplete>
	</mat-form-field>
	<mat-form-field class="demon-form-field" appearance="fill">
		<mat-label>Max Level</mat-label>
		<input type="number" matInput [formControl]="levelControl" />
	</mat-form-field>
</form>

<!-- Skills -->
<div class="skills">
	<ng-container *ngFor="let skillControl of skillControls; let i = index">
		<form class="skill-form">
			<mat-form-field class="skill-form-field" appearance="fill">
				<mat-label>Skill {{ i + 1 }}</mat-label>
				<input
					type="text"
					placeholder="Maragi"
					aria-label="Skill"
					matInput
					[formControl]="skillControl"
					[matAutocomplete]="auto"
				/>
				<mat-autocomplete #auto="matAutocomplete">
					<mat-option
						*ngFor="let skill of filteredSkills | async"
						[value]="skill"
					>
						{{ skill }}
					</mat-option>
				</mat-autocomplete>
			</mat-form-field>
		</form>
	</ng-container>
</div>

<!-- Buttons -->
<div class="buttons">
	<button (click)="calculate()" color="primary" mat-raised-button>
		Calculate
	</button>
	<button (click)="test()" color="warn" mat-raised-button>Testing</button>
	<button (click)="log()" color="warn" mat-raised-button>Log</button>
</div>

<!-- Chain Display -->
<div class="accordion" *ngIf="chains">
	<mat-accordion>
		<mat-expansion-panel hideToggle>
			<mat-expansion-panel-header>
				<mat-panel-title> This is the expansion title </mat-panel-title>
				<mat-panel-description>
					This is a summary of the content
				</mat-panel-description>
			</mat-expansion-panel-header>
			<p>This is the primary content of the panel.</p>
		</mat-expansion-panel>
		<mat-expansion-panel
			(opened)="panelOpenState = true"
			(closed)="panelOpenState = false"
		>
			<mat-expansion-panel-header>
				<mat-panel-title> Self aware panel </mat-panel-title>
				<mat-panel-description>
					Currently I am {{ panelOpenState ? 'open' : 'closed' }}
				</mat-panel-description>
			</mat-expansion-panel-header>
			<p>I'm visible because I am open</p>
		</mat-expansion-panel>
	</mat-accordion>
</div>

<table *ngIf="chains">
	<thead>
		<tr>
			<th>Price</th>
			<th>Steps</th>
			<th>Level Required</th>
			<th>Result</th>
		</tr>
	</thead>
	<tbody>
		<tr *ngFor="let row of chains">
			<td>{{ row.cost }}</td>
			<td>{{ row.steps.length }}</td>
			<td>{{ chainCalc?.levelRequired(row) }}</td>
			<td routerLink="active">
				<a routerLink="{{ row.steps[row.steps.length - 1].result }}">
					{{ row.steps[row.steps.length - 1].result }}
				</a>
			</td>
		</tr>
	</tbody>
</table>
